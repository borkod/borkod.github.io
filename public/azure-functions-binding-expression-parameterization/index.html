<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Azure Functions Binding Expression Parameterization - Borko Djurkovic Website</title><meta name="Description" content="Azure Functions Binding Expression Parameterization"><meta property="og:title" content="Azure Functions Binding Expression Parameterization" />
<meta property="og:description" content="Azure Functions Binding Expression Parameterization" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://www.b3o.ca/azure-functions-binding-expression-parameterization/" />
<meta property="og:image" content="http://www.b3o.ca/azure-functions-binding-expression-parameterization/featured-image.png"/>
<meta property="article:published_time" content="2020-03-09T21:43:04-04:00" />
<meta property="article:modified_time" content="2020-03-09T21:43:04-04:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://www.b3o.ca/azure-functions-binding-expression-parameterization/featured-image.png"/>
<meta name="twitter:title" content="Azure Functions Binding Expression Parameterization"/>
<meta name="twitter:description" content="Azure Functions Binding Expression Parameterization"/>
<meta name="application-name" content="Borko Djurkovic Website">
<meta name="apple-mobile-web-app-title" content="Borko Djurkovic Website"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://www.b3o.ca/azure-functions-binding-expression-parameterization/" /><link rel="prev" href="http://www.b3o.ca/microsoft-ignite-the-tour-toronto-recap/" /><link rel="next" href="http://www.b3o.ca/azure-global-load-balancing-comparison/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Azure Functions Binding Expression Parameterization",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/www.b3o.ca\/azure-functions-binding-expression-parameterization\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "http:\/\/www.b3o.ca\/azure-functions-binding-expression-parameterization\/featured-image.png",
                            "width":  1600 ,
                            "height":  840 
                        }],"genre": "posts","keywords": "Azure, Microsoft, Functions, Serverless, Tips and Tricks","wordcount":  387 ,
        "url": "http:\/\/www.b3o.ca\/azure-functions-binding-expression-parameterization\/","datePublished": "2020-03-09T21:43:04-04:00","dateModified": "2020-03-09T21:43:04-04:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Borko"
            },"description": "Azure Functions Binding Expression Parameterization"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Borko Djurkovic Website">Borko Djurkovic</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Borko Djurkovic Website">Borko Djurkovic</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Azure Functions Binding Expression Parameterization</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://www.b3o.ca" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>Borko</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2020-03-09">2020-03-09</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;387 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;2 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/azure-functions-binding-expression-parameterization/featured-image.png"
        data-srcset="/azure-functions-binding-expression-parameterization/featured-image.png, /azure-functions-binding-expression-parameterization/featured-image.png 1.5x, /azure-functions-binding-expression-parameterization/featured-image.png 2x"
        data-sizes="auto"
        alt="/azure-functions-binding-expression-parameterization/featured-image.png"
        title="Azure Functions Binding Expression Parameterization" /></div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents"></nav></div>
            </div><div class="content" id="content"><p><a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview" target="_blank" rel="noopener noreffer">Azure Functions</a> is an event driven, serverless computing service provided by Microsoft Azure Cloud platform. Azure Functions allows developers to deploy code connecting to data sources or messaging solutions thus enabling easier implementation of event driven processing of messages. Azure Functions, like rest of serverless computing, is designed to accelerate and simplify application development by removing the responsibility of infrastructure management.</p>
<p>Azure Functions uses concept of <a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-triggers-bindings" target="_blank" rel="noopener noreffer">bindings</a> as a way of declaratively connecting another resource to the function. Bindings may be connected as input bindings, output bindings, or both, and can be used as triggers for message and event processing.</p>
<p>Few commonly used Azure Function bindings are:</p>
<p>Blog Storage
Cosmos DB
Event Grid
Event Hubs
If implementing in JavaScript, bindings are specified in function.json as shown in below example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;eventHubTrigger&#34;</span><span class="p">,</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;eventHubMessages&#34;</span><span class="p">,</span>
    <span class="nt">&#34;direction&#34;</span><span class="p">:</span> <span class="s2">&#34;in&#34;</span><span class="p">,</span>
    <span class="nt">&#34;eventHubName&#34;</span><span class="p">:</span> <span class="s2">&#34;defaulthub&#34;</span><span class="p">,</span>
    <span class="nt">&#34;connection&#34;</span><span class="p">:</span> <span class="s2">&#34;eventsamples_defaultReadPolicy_EVENTHUB&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Here, <code>eventsamples_defaultReadPolicy_EVENTHUB</code> refers to the Azure Function Application Setting that specifies the Event Hub Connection strings. Similar binding definitions are available for other supported services.</p>
<p>It is possible to specify few other parameters in the binding definition. For example, the above trigger binding for Event Hubs can include additional parameters for cardinality or the consumer group:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="err">...</span>
    <span class="nt">&#34;cardinality&#34;</span><span class="p">:</span> <span class="s2">&#34;many&#34;</span><span class="p">,</span>
    <span class="nt">&#34;consumerGroup&#34;</span><span class="p">:</span> <span class="s2">&#34;default&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>One issue arises if we wish to re-use the same function with only a single change that is the target consumer group. Ideally we would want to set the consumer group in an environmental variable in the application settings. How does one load in a consumer group from an Application setting?</p>
<p>Similar problem can occur with other binding sources. For example, <code>path</code> setting for Blob storage, <code>databaseName</code> or <code>collectionName</code> for Cosmos DB.</p>
<p>A nice trick I recently found was to use binding expressions. In your function.json file, you can specify consumer group name inside % symbol:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="err">...</span>
    <span class="nt">&#34;consumerGroup&#34;</span><span class="p">:</span> <span class="s2">&#34;%customGroupName%&#34;</span>
    <span class="err">...</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Then add an Application setting with corresponding name (<code>customGroupName</code> in this case).</p>
<p>Here are couple of screenshots of the function settings and application settings with these updates.</p>
<p>Consumer group will then be resolved to the value in Application Settings at startup.</p>
<p>Same method can be used for binding for other services and it works for trigger, input, and output bindings.</p>
<p>Hope this is helpful!</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2020-03-09</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/azure-functions-binding-expression-parameterization/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="http://www.b3o.ca/azure-functions-binding-expression-parameterization/" data-title="Azure Functions Binding Expression Parameterization" data-via="borkod" data-hashtags="Azure,Microsoft,Functions,Serverless,Tips and Tricks"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://www.b3o.ca/azure-functions-binding-expression-parameterization/" data-hashtag="Azure"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="http://www.b3o.ca/azure-functions-binding-expression-parameterization/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="Share on Reddit" data-sharer="reddit" data-url="http://www.b3o.ca/azure-functions-binding-expression-parameterization/"><i class="fab fa-reddit fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/azure/">Azure</a>,&nbsp;<a href="/tags/microsoft/">Microsoft</a>,&nbsp;<a href="/tags/functions/">Functions</a>,&nbsp;<a href="/tags/serverless/">Serverless</a>,&nbsp;<a href="/tags/tips-and-tricks/">Tips and Tricks</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/microsoft-ignite-the-tour-toronto-recap/" class="prev" rel="prev" title="Microsoft Ignite the Tour Toronto Recap"><i class="fas fa-angle-left fa-fw"></i>Microsoft Ignite the Tour Toronto Recap</a>
            <a href="/azure-global-load-balancing-comparison/" class="next" rel="next" title="Azure Global Load Balancing Comparison">Azure Global Load Balancing Comparison<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"cookieconsent":{"content":{"dismiss":"Got it!","link":"Learn more","message":"This website uses Cookies to improve your experience."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
